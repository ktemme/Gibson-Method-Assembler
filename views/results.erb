<h1>Sorted parts</h1>
<% @parts.each_with_index do |part,id| %>
	<div class="detail">
	<% part.map{|key,value| %>
		<% unless key == 'sequence' %>
			<%= "#{key} : #{value}<br/>" %>
		<% else %>
			<%= "#{key} : #{reversecomplement(value)}<br/>" %>
		<% end %>
	<% } %>
	</div>
<% end %>
<br/>
<h3>Primers</h3>
<% @primers.each_with_index do |primer,id| %>
	<%= "#{id+1} forward:\t#{primer.first}" %><br/>
	<%= "#{id+1} reverse:\t#{primer.last}" %><br/>
<% end %>
<h3>Full Sequence</h3>
<form id="ape" action='<%= url_for "/download" %>' method='post'> 
	<input type="hidden" name="construct[sequence]" value="<%= @full %>">
	<% total_size = 0 %>
	<% @parts.each_with_index do |part,id| %>
		<input type="hidden" name="construct[parts][<%= id+1 %>][name]" value="<%= part['name'] %>">
		<input type="hidden" name="construct[parts][<%= id+1 %>][start]" value="<%= total_size + 1 %>">
		<input type="hidden" name="construct[parts][<%= id+1 %>][end]" value="<%= total_size + part['fullsequence'].size %>">
		<% total_size += part['fullsequence'].size %>
	<% end %>
	<a href="javascript:submitForm()">Download ApE file</a>
</form>
<textarea cols="100" rows="25">
	<%= @full %>
</textarea>
